function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var i,n=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{"x+BD":function(e,t,i){"use strict";i.r(t),i.d(t,"VideoModule",(function(){return Ve}));var n=i("ofXK"),o=i("tyNb"),r=i("mrSG"),a=i("fXoL"),s=i("XNiG"),c=i("VRyK"),l=i("3Pt+"),u=i("0IaG"),d=i("V2kc"),b=i("7q3A"),f=i("/t3+"),p=i("f0Cb"),h=i("kmnG"),m=i("qFsG"),v=i("tk/3"),g=i("2ChS"),y=i("Cfvw"),k=i("lJxs"),V=i("0EUg"),w=i("rdAd"),W=i("MutI"),C=i("bTqV"),O=i("NFeN"),S=i("FKr1"),L=i("bv9b");function R(e,t){if(1&e&&(a.Wb(0,"div"),a.Wb(1,"a",2),a.Wb(2,"div",3),a.Wb(3,"div",4),a.Wb(4,"p",5),a.Lc(5),a.Vb(),a.Wb(6,"span",6),a.Lc(7),a.jc(8,"async"),a.Vb(),a.Vb(),a.Rb(9,"mat-progress-bar",7),a.jc(10,"async"),a.Vb(),a.Vb(),a.Vb()),2&e){var i=t.$implicit;a.Db(5),a.Nc("- ",i.name,""),a.Db(2),a.Nc("",a.kc(8,3,i.progressValue)," %"),a.Db(2),a.pc("value",a.kc(10,5,i.progressValue))}}var x,D=((x=function(){function e(t,i,n){_classCallCheck(this,e),this.bottomSheetRef=t,this.data=i,this.service=n,this.files=[],this.folder="",this.list=[],this.uploadCompleted=0}return _createClass(e,[{key:"ngOnInit",value:function(){try{this.handleUpload()}catch(e){console.warn(e)}}},{key:"handleUpload",value:function(){var e=this;this.files=this.data.files,this.folder=this.data.folder;var t=new FormData,i=[];this.list=[],this.files.forEach((function(n,o){var r="".concat(n.size,"_").concat(n.lastModified,"_").concat(n.name);e.list.push({fileId:n.size+n.lastModified,name:n.name,progressValue:new s.a}),t.append("file_"+o,n,r),i.push(e.service.uploadFiles(t,e.folder).pipe(Object(k.a)((function(t){return e.getEventMessage(t,n)}))))})),t.append("length",""+this.files.length),Object(y.a)(i).pipe(Object(V.a)()).subscribe((function(t){e.list.length===e.uploadCompleted&&(setTimeout((function(){e.bottomSheetRef.dismiss(".")}),500),console.log(t))}))}},{key:"updateListOfProgress",value:function(e,t){var i=this.list.findIndex((function(t){return+t.fileId==+e}));i>-1&&this.list[i].progressValue.next(t)}},{key:"trackFn",value:function(e,t){return t.progressValue}},{key:"getEventMessage",value:function(e,t){switch(e.type){case v.e.Sent:return'Uploading file "'.concat(t.name.substring(0,10),'" of size ').concat(t.size,".");case v.e.UploadProgress:var i=Math.round(100*e.loaded/e.total);return this.updateListOfProgress(t.size+t.lastModified,i),'File "'.concat(t.name.substring(0,10),'" is ').concat(i,"% uploaded.");case v.e.Response:return this.uploadCompleted++,'File "'.concat(t.name.substring(0,10),'" was completely uploaded!');default:return'File "'.concat(t.name.substring(0,10),'" surprising upload event: ').concat(e,".")}}}]),e}()).\u0275fac=function(e){return new(e||x)(a.Qb(g.e),a.Qb(g.a),a.Qb(w.a))},x.\u0275cmp=a.Kb({type:x,selectors:[["app-progress"]],decls:5,vars:2,consts:[["mat-icon-button","","color","warn",3,"click"],[4,"ngFor","ngForOf","ngForTrackBy"],["mat-list-item",""],[2,"width","100%"],[1,"space-between"],["mat-line","",2,"font-size",".8em"],[2,"font-size",".8em"],["mode","determinate",3,"value"]],template:function(e,t){1&e&&(a.Wb(0,"mat-nav-list"),a.Wb(1,"button",0),a.ec("click",(function(){return t.bottomSheetRef.dismiss(".")})),a.Wb(2,"mat-icon"),a.Lc(3,"highlight_off"),a.Vb(),a.Vb(),a.Jc(4,R,11,7,"div",1),a.Vb()),2&e&&(a.Db(4),a.pc("ngForOf",t.list)("ngForTrackBy",t.trackFn))},directives:[W.c,C.a,O.a,n.m,W.a,S.k,L.a],pipes:[n.b],styles:[".space-between[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}"]}),x);function _(e,t){if(1&e){var i=a.Xb();a.Wb(0,"button",8),a.ec("click",(function(){return a.Cc(i),a.ic().submit()})),a.Wb(1,"mat-icon"),a.Lc(2,"add"),a.Vb(),a.Lc(3," Submit "),a.Vb()}}function T(e,t){if(1&e){var i=a.Xb();a.Wb(0,"p",9),a.Wb(1,"span"),a.Lc(2),a.Vb(),a.Wb(3,"button",10),a.ec("click",(function(){a.Cc(i);var e=t.$implicit;return a.ic().remove(e)})),a.Wb(4,"mat-icon",11),a.Lc(5,"delete_sweep"),a.Vb(),a.Vb(),a.Vb()}if(2&e){var n=t.$implicit;a.Db(2),a.Nc("- ",n.substring(14),"")}}var F,I=((F=function(){function e(t,i){_classCallCheck(this,e),this.service=t,this.bottomSheet=i,this.accepts={doc:"application/pdf,.doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document",video:"video/mp4,video/*",audio:"audio/*",image:"image/*",doc2:".pdf,.doc,.docx"},this.listOfNames=[],this.listToDelete=[],this.files=[],this.nameBtn="",this.config={multiple:!0,showSubmitButton:!0,folderToSaveInServer:"folder",propertyStringToParent:new s.a,propertyStringToUploader:new s.a,eventSubmitToUploader:new s.a}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.config.propertyStringToUploader.subscribe((function(t){console.log(t);var i=t.split(";");i.pop(),e.listOfNames=i,e.listToDelete=[]})),this.config.eventSubmitToUploader.subscribe((function(t){return Object(r.b)(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.submit();case 2:case"end":return e.stop()}}),e,this)})))}))}},{key:"upload",value:function(e){for(var t=0;t<e.length;t++){var i=e.item(t);this.config.multiple?this.listOfNames.push(this.setFileName(i)):(this.listToDelete.push(this.listOfNames[0]),this.listOfNames=[this.setFileName(i)]),this.sendPropertyOfParent(),this.files.push(i)}}},{key:"setIcon",value:function(e){var t=e.lastIndexOf("."),i=e.substring(t+1);return"pdf"===i||"pdf;"===i?"assets/svg/pdf.svg":"assets/svg/word.svg"}},{key:"remove",value:function(e){var t=this.listOfNames.findIndex((function(t){return t===e}));-1!==t&&(this.listOfNames.splice(t,1),this.sendPropertyOfParent()),this.listToDelete.push(e);var i=e.indexOf("_"),n=e.substring(i);-1!==this.files.findIndex((function(e){return e.name===n}))&&this.files.splice(t,1)}},{key:"openInput",value:function(e){e.click()}},{key:"sendPropertyOfParent",value:function(){var e="";this.listOfNames.forEach((function(t){e+=t+";"})),this.config.propertyStringToParent.next(e)}},{key:"submit",value:function(){return Object(r.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.bottomSheet.open(D,{data:{files:this.files,folder:this.config.folderToSaveInServer},panelClass:"my-component-bottom-sheet"}).afterDismissed().subscribe((function(e){return Object(r.b)(t,void 0,void 0,regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Bottom sheet has been dismissed ",e),t.next=3,this.service.deleteFiles(this.listToDelete,this.config.folderToSaveInServer).toPromise();case 3:i=t.sent,console.log(i);case 5:case"end":return t.stop()}}),t,this)})))}));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"setFileName",value:function(e){return"".concat(e.size,"_").concat(e.lastModified,"_").concat(e.name)}}]),e}()).\u0275fac=function(e){return new(e||F)(a.Qb(w.a),a.Qb(g.c))},F.\u0275cmp=a.Kb({type:F,selectors:[["app-upload"]],inputs:{nameBtn:"nameBtn",config:"config"},decls:13,vars:5,consts:[[1,"row"],[1,"col-md-12","mb-3"],[1,"myrow"],["hidden","","type","file",3,"accept","multiple","change"],["e",""],["mat-raised-button","","type","button","color","accent",3,"click"],["mat-raised-button","","type","button","color","primary",3,"click",4,"ngIf"],["style","font-size: .7em;margin: 0;",4,"ngFor","ngForOf"],["mat-raised-button","","type","button","color","primary",3,"click"],[2,"font-size",".7em","margin","0"],["mat-icon-button","","color","warn","type","button",3,"click"],[2,"font-size","1.3em !important"]],template:function(e,t){if(1&e){var i=a.Xb();a.Wb(0,"div",0),a.Wb(1,"div",1),a.Wb(2,"div",2),a.Wb(3,"input",3,4),a.ec("change",(function(){a.Cc(i);var e=a.Ac(4);return t.upload(e.files)})),a.Vb(),a.Wb(5,"button",5),a.ec("click",(function(){a.Cc(i);var e=a.Ac(4);return t.openInput(e)})),a.Wb(6,"mat-icon"),a.Lc(7,"add"),a.Vb(),a.Lc(8),a.Vb(),a.Jc(9,_,4,0,"button",6),a.Lc(10," \xa0\xa0 "),a.Wb(11,"div",2),a.Jc(12,T,6,1,"p",7),a.Vb(),a.Vb(),a.Vb(),a.Vb()}2&e&&(a.Db(3),a.pc("accept",t.accepts.video)("multiple",t.config.multiple),a.Db(5),a.Nc(" ",t.nameBtn," "),a.Db(1),a.pc("ngIf",t.config.showSubmitButton),a.Db(3),a.pc("ngForOf",t.listOfNames))},directives:[C.a,O.a,n.n,n.m],styles:[".my-component-bottom-sheet{min-width:80vw!important}"]}),F);function P(e,t){if(1&e){var i=a.Xb();a.Wb(0,"button",14),a.ec("click",(function(){a.Cc(i);var e=a.ic();return e.onOkClick(e.myForm.value)})),a.Lc(1,"Enregistre"),a.Vb()}if(2&e){var n=a.ic();a.pc("disabled",n.myForm.invalid)}}var j,N,z=((j=function(){function e(t,i,n,o){_classCallCheck(this,e),this.dialogRef=t,this.data=i,this.fb=n,this.uow=o,this.subs=[],this.title="",this.visualisation=!1,this.config={multiple:!1,showSubmitButton:!1,folderToSaveInServer:"videos",propertyStringToParent:new s.a,propertyStringToUploader:new s.a,eventSubmitToUploader:new s.a}}return _createClass(e,[{key:"ngOnInit",value:function(){return Object(r.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.o=this.data.model,this.title=this.data.title,this.visualisation=this.data.visualisation,this.createForm(),this.config.propertyStringToParent.subscribe((function(e){return t.myForm.get("urlVideo").setValue(e)})),setTimeout((function(){t.config.propertyStringToUploader.next(t.o.urlVideo)}),100);case 1:case"end":return e.stop()}}),e,this)})))}},{key:"onNoClick",value:function(){this.dialogRef.close()}},{key:"onOkClick",value:function(e){var t,i=this;t=0===e.id?this.uow.videos.post(e).subscribe((function(t){i.config.eventSubmitToUploader.next(),i.dialogRef.close(e)})):this.uow.videos.put(e.id,e).subscribe((function(t){i.dialogRef.close(e),i.config.eventSubmitToUploader.next()})),this.subs.push(t)}},{key:"createForm",value:function(){this.myForm=this.fb.group({id:[this.o.id,[l.r.required]],title:[this.o.title,[l.r.required]],order:[this.o.order,[l.r.required]],description:[this.o.description,[]],date:[this.o.date,[l.r.required]],urlVideo:[this.o.urlVideo,[l.r.required]]})}},{key:"resetForm",value:function(){this.o=new d.m,this.createForm()}},{key:"ngOnDestroy",value:function(){this.subs.forEach((function(e){e.unsubscribe()}))}}]),e}()).\u0275fac=function(e){return new(e||j)(a.Qb(u.g),a.Qb(u.a),a.Qb(l.c),a.Qb(b.a))},j.\u0275cmp=a.Kb({type:j,selectors:[["app-update"]],decls:29,vars:7,consts:[[1,"dialog"],["mat-dialog-title",""],["role","toolbar",1,"task-header"],[1,"content"],[3,"formGroup"],["appearance","fill",1,"col-md-6"],["matInput","","formControlName","title","required",""],["matInput","","formControlName","order","required",""],["matInput","","formControlName","urlVideo","required",""],[1,"col-md-6"],["nameBtn","Upload",3,"config"],["align","end"],["mat-button","","type","button",3,"click"],["mat-raised-button","","color","primary","cdkFocusInitial","",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","primary","cdkFocusInitial","",3,"disabled","click"]],template:function(e,t){1&e&&(a.Wb(0,"div",0),a.Wb(1,"h1",1),a.Wb(2,"mat-toolbar",2),a.Wb(3,"span"),a.Lc(4),a.Vb(),a.Vb(),a.Rb(5,"mat-divider"),a.Vb(),a.Wb(6,"div",3),a.Wb(7,"mat-dialog-content"),a.Wb(8,"form",4),a.Wb(9,"mat-form-field",5),a.Wb(10,"mat-label"),a.Lc(11,"title"),a.Vb(),a.Rb(12,"input",6),a.Vb(),a.Wb(13,"mat-form-field",5),a.Wb(14,"mat-label"),a.Lc(15,"order"),a.Vb(),a.Rb(16,"input",7),a.Vb(),a.Wb(17,"mat-form-field",5),a.Wb(18,"mat-label"),a.Lc(19,"urlVideo"),a.Vb(),a.Rb(20,"input",8),a.Vb(),a.Wb(21,"div",9),a.Rb(22,"app-upload",10),a.Vb(),a.Lc(23),a.jc(24,"json"),a.Vb(),a.Vb(),a.Wb(25,"mat-dialog-actions",11),a.Wb(26,"button",12),a.ec("click",(function(){return t.onNoClick()})),a.Lc(27,"Annuler"),a.Vb(),a.Jc(28,P,2,1,"button",13),a.Vb(),a.Vb(),a.Vb()),2&e&&(a.Db(4),a.Mc(t.title),a.Db(4),a.pc("formGroup",t.myForm),a.Db(14),a.pc("config",t.config),a.Db(1),a.Nc(" ",a.kc(24,5,t.myForm.value)," "),a.Db(5),a.pc("ngIf",!t.visualisation))},directives:[u.h,f.a,p.a,u.e,l.s,l.m,l.g,h.c,h.f,m.b,l.b,l.l,l.f,l.q,I,u.c,C.a,n.n],pipes:[n.h],styles:[""]}),j),M=i("M9IT"),U=i("Dh3D"),J=i("JX91"),Q=i("qQ+2"),E=i("hUFt"),q=i("8lcG"),A=i("kZa3"),B=i("LRne"),X=((N=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck(this,i),t.call(this,"files")}return _createClass(i,[{key:"deleteFiles",value:function(e,t){return 0===e.length?Object(B.a)(null):this.http.post("".concat(this.urlApi,"/").concat(this.controller,"/deleteFiles/"),{filenames:e,folder:t})}},{key:"uploadFiles0",value:function(e,t){return e?this.http.post("".concat(this.urlApi,"/").concat(this.controller,"/uploadFiles/").concat(t),e,{headers:new v.f({enctype:"multipart/form-data"}),reportProgress:!0}):Object(B.a)(null)}},{key:"uploadFiles",value:function(e,t){return this.http.request(new v.g("POST","".concat(this.urlApi,"/").concat(this.controller,"/uploadFiles/").concat(t),e,{reportProgress:!0}))}}]),i}(A.a)).\u0275fac=function(e){return new(e||N)},N.\u0275prov=a.Mb({token:N,factory:N.\u0275fac,providedIn:"root"}),N),$=i("7EHt"),G=i("+0xr"),H=i("Xa2L");function K(e,t){1&e&&a.Rb(0,"mat-spinner")}function Z(e,t){if(1&e&&(a.Wb(0,"div",27),a.Jc(1,K,1,0,"mat-spinner",28),a.Vb()),2&e){var i=a.ic();a.Db(1),a.pc("ngIf",i.isLoadingResults)}}function Y(e,t){1&e&&(a.Wb(0,"th",29),a.Lc(1,"Title"),a.Vb())}function ee(e,t){if(1&e&&(a.Wb(0,"td",30),a.Lc(1),a.Vb()),2&e){var i=t.$implicit;a.Db(1),a.Mc(i.title)}}function te(e,t){1&e&&(a.Wb(0,"th",29),a.Lc(1,"Order"),a.Vb())}function ie(e,t){if(1&e&&(a.Wb(0,"td",30),a.Lc(1),a.Vb()),2&e){var i=t.$implicit;a.Db(1),a.Mc(i.order)}}function ne(e,t){1&e&&(a.Wb(0,"th",29),a.Lc(1,"Date"),a.Vb())}function oe(e,t){if(1&e&&(a.Wb(0,"td",30),a.Lc(1),a.jc(2,"date"),a.Vb()),2&e){var i=t.$implicit;a.Db(1),a.Mc(a.lc(2,1,i.date,"dd/MM/yyyy"))}}function re(e,t){1&e&&(a.Wb(0,"th",29),a.Lc(1,"Url Video"),a.Vb())}function ae(e,t){if(1&e&&(a.Wb(0,"td",30),a.Lc(1),a.Vb()),2&e){var i=t.$implicit;a.Db(1),a.Mc(i.urlVideo)}}function se(e,t){1&e&&a.Rb(0,"th",31)}function ce(e,t){if(1&e){var i=a.Xb();a.Wb(0,"td",30),a.Wb(1,"div",32),a.Wb(2,"button",33),a.ec("click",(function(){a.Cc(i);var e=t.$implicit;return a.ic().edit(e)})),a.Wb(3,"mat-icon"),a.Lc(4,"create"),a.Vb(),a.Vb(),a.Wb(5,"button",34),a.ec("click",(function(){a.Cc(i);var e=t.$implicit;return a.ic().detail(e)})),a.Wb(6,"mat-icon"),a.Lc(7,"remove_red_eye"),a.Vb(),a.Vb(),a.Wb(8,"button",35),a.ec("click",(function(){a.Cc(i);var e=t.$implicit;return a.ic().delete(e)})),a.Wb(9,"mat-icon"),a.Lc(10,"delete_sweep"),a.Vb(),a.Vb(),a.Vb(),a.Vb()}}function le(e,t){1&e&&a.Rb(0,"tr",36)}function ue(e,t){1&e&&a.Rb(0,"tr",37)}var de,be,fe,pe=function(){return[10,25,50,100,250]},he=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:(de=function(){function e(t,i,n,o,r,c,u){_classCallCheck(this,e),this.uow=t,this.dialog=i,this.excel=n,this.mydialog=o,this.url=r,this.breadcrumb=c,this.service=u,this.update=new a.o,this.isLoadingResults=!0,this.resultsLength=0,this.isRateLimitReached=!1,this.subs=[],this.dataSource=[],this.selectedList=[],this.displayedColumns=["title","order","date","urlVideo","option"],this.panelOpenState=!1,this.title=new l.d(""),this.order=new l.d(0),this.urlVideo=new l.d(""),this.dataSubject=new s.a,this.isListTabSelected=!0,this.isChartTabSelected=!0,this.listTabSelectedEvent=new s.a,this.chartTabSelectedEvent=new s.a,this.breadcrumb.name="Videos"}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this,t=Object(c.a)(this.sort.sortChange,this.paginator.page,this.update).pipe(Object(J.a)(null)).subscribe((function(t){!0===t?e.paginator.pageIndex=0:t=t,e.paginator.pageSize?t=t:e.paginator.pageSize=10;var i=e.paginator.pageIndex*e.paginator.pageSize;e.isLoadingResults=!0,e.getPage(i,e.paginator.pageSize,e.sort.active?e.sort.active:"id",e.sort.direction?e.sort.direction:"desc",""===e.title.value?"*":e.title.value,0===e.order.value?0:e.order.value,""===e.urlVideo.value?"*":e.urlVideo.value)}));this.subs.push(t)}},{key:"reset",value:function(){this.title.setValue(""),this.order.setValue(0),this.urlVideo.setValue(""),this.update.next(!0)}},{key:"generateExcel",value:function(){this.excel.json_to_sheet(this.dataSource)}},{key:"search",value:function(){this.update.next(!0)}},{key:"getPage",value:function(e,t,i,n,o,r,a){var s=this,c=this.uow.videos.getAll(e,t,i,n,o,r,a).subscribe((function(e){console.log(e.list),s.dataSource=e.list,s.resultsLength=e.count,s.isLoadingResults=!1}));this.subs.push(c)}},{key:"selectedIndexChange",value:function(e){}},{key:"openDialog",value:function(e,t,i){return this.dialog.open(z,{width:"1100px",disableClose:!0,data:{model:e,title:t,visualisation:i}}).afterClosed()}},{key:"add",value:function(){var e=this;this.openDialog(new d.m,"Ajouter "+this.breadcrumb.name,!1).subscribe((function(t){t&&e.update.next(!0)}))}},{key:"edit",value:function(e){var t=this;this.openDialog(e,"Modifier "+this.breadcrumb.name,!1).subscribe((function(e){e&&t.update.next(!0)}))}},{key:"detail",value:function(e){var t=this;this.openDialog(e,"D\xe9tail "+this.breadcrumb.name,!0).subscribe((function(e){e&&t.update.next(!0)}))}},{key:"delete",value:function(e){return Object(r.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var i,n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.mydialog.openDialog(this.breadcrumb.name).toPromise();case 2:if(t.t0=t.sent,"ok"!==t.t0){t.next=7;break}this.service.deleteFiles([e.urlVideo.replace(";","")],"videos").subscribe((function(e){return console.log(e)})),i=this.uow.videos.delete(e.id).subscribe((function(){return n.update.next(!0)})),this.subs.push(i);case 7:case"end":return t.stop()}}),t,this)})))}},{key:"displayImage",value:function(e){return e?e&&e.startsWith("http")?e:"".concat(this.url,"/videos/").concat(e.replace(";","")):"assets/404.jpg"}},{key:"imgError",value:function(e){e.src="assets/404.jpg"}},{key:"isSelected",value:function(e){return!!this.selectedList.find((function(t){return t.id===e.id}))}},{key:"check",value:function(e){var t=this.selectedList.findIndex((function(t){return e.id===t.id}));-1!==t?this.selectedList.splice(t,1):this.selectedList.push(e)}},{key:"isAllSelected",value:function(){return this.selectedList.length===this.dataSource.length}},{key:"masterToggle",value:function(){this.selectedList=this.isAllSelected()?[]:Array.from(this.dataSource)}},{key:"deleteList",value:function(){return Object(r.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.mydialog.openDialog("role").toPromise();case 2:if(e.t0=e.sent,"ok"!==e.t0){e.next=6;break}t=this.uow.videos.deleteRange(this.selectedList).subscribe((function(){i.selectedList=[],i.update.next(!0)})),this.subs.push(t);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"ngOnDestroy",value:function(){this.subs.forEach((function(e){e.unsubscribe()}))}}]),e}(),de.\u0275fac=function(e){return new(e||de)(a.Qb(b.a),a.Qb(u.b),a.Qb(Q.a),a.Qb(E.a),a.Qb("BASE_URL"),a.Qb(q.a),a.Qb(X))},de.\u0275cmp=a.Kb({type:de,selectors:[["app-video"]],viewQuery:function(e,t){var i;1&e&&(a.Hc(M.a,!0),a.Hc(U.a,!0)),2&e&&(a.zc(i=a.fc())&&(t.paginator=i.first),a.zc(i=a.fc())&&(t.sort=i.first))},decls:54,vars:8,consts:[[1,"d-flex","flex-row-reverse","pt-3","mb-3"],["mat-raised-button","","color","primary",3,"click"],["expanded","",3,"opened","closed"],[1,"d-flex","align-items-center"],[1,"mb-0","ml-2"],[1,"mt-2"],["appearance","fill",1,"col-md-6"],["matInput","","required","",3,"formControl"],[1,"d-flex","flex-row-reverse","mb-2","mr-2"],["mat-raised-button","",3,"click"],[1,"example-container","mat-elevation-z8","mt-2"],["class","example-loading-shade",4,"ngIf"],[1,"example-table-container"],["mat-table","","multiTemplateDataRows","","aria-label","Elements","matSort","",3,"dataSource"],["table",""],["matColumnDef","title"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","order"],["matColumnDef","date"],["matColumnDef","urlVideo"],["matColumnDef","option",2,"flex-direction","row-reverse"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageIndex","0","pageSize","10","showFirstLastButtons","",3,"length","pageSizeOptions"],["paginator",""],[1,"example-loading-shade"],[4,"ngIf"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[1,"button-row"],["title","Modifier","mat-icon-button","","color","accent",3,"click"],["title","Visualiser","mat-icon-button","","color","warn",3,"click"],["title","Supprimer","mat-icon-button","","color","primary",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(a.Wb(0,"div",0),a.Wb(1,"button",1),a.ec("click",(function(){return t.add()})),a.Wb(2,"mat-icon"),a.Lc(3,"add"),a.Vb(),a.Lc(4," Video "),a.Vb(),a.Vb(),a.Wb(5,"mat-accordion"),a.Wb(6,"mat-expansion-panel",2),a.ec("opened",(function(){return t.panelOpenState=!0}))("closed",(function(){return t.panelOpenState=!1})),a.Wb(7,"mat-expansion-panel-header"),a.Wb(8,"mat-panel-title",3),a.Wb(9,"mat-icon"),a.Lc(10,"search"),a.Vb(),a.Wb(11,"p",4),a.Lc(12,"Recherche"),a.Vb(),a.Vb(),a.Rb(13,"mat-panel-description"),a.Vb(),a.Rb(14,"mat-divider"),a.Wb(15,"div",5),a.Wb(16,"mat-form-field",6),a.Wb(17,"mat-label"),a.Lc(18,"title"),a.Vb(),a.Rb(19,"input",7),a.Vb(),a.Vb(),a.Wb(20,"div",8),a.Wb(21,"button",9),a.ec("click",(function(){return t.reset()})),a.Wb(22,"mat-icon"),a.Lc(23,"refresh"),a.Vb(),a.Lc(24," R\xe9initialiser "),a.Vb(),a.Lc(25," \xa0\xa0 "),a.Wb(26,"button",1),a.ec("click",(function(){return t.search()})),a.Wb(27,"mat-icon"),a.Lc(28,"search"),a.Vb(),a.Lc(29," Rechercher "),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Wb(30,"div",10),a.Jc(31,Z,2,1,"div",11),a.Wb(32,"div",12),a.Wb(33,"table",13,14),a.Ub(35,15),a.Jc(36,Y,2,0,"th",16),a.Jc(37,ee,2,1,"td",17),a.Tb(),a.Ub(38,18),a.Jc(39,te,2,0,"th",16),a.Jc(40,ie,2,1,"td",17),a.Tb(),a.Ub(41,19),a.Jc(42,ne,2,0,"th",16),a.Jc(43,oe,3,4,"td",17),a.Tb(),a.Ub(44,20),a.Jc(45,re,2,0,"th",16),a.Jc(46,ae,2,1,"td",17),a.Tb(),a.Ub(47,21),a.Jc(48,se,1,0,"th",22),a.Jc(49,ce,11,0,"td",17),a.Tb(),a.Jc(50,le,1,0,"tr",23),a.Jc(51,ue,1,0,"tr",24),a.Vb(),a.Vb(),a.Rb(52,"mat-paginator",25,26),a.Vb()),2&e&&(a.Db(19),a.pc("formControl",t.title),a.Db(12),a.pc("ngIf",t.isLoadingResults),a.Db(2),a.pc("dataSource",t.dataSource),a.Db(17),a.pc("matHeaderRowDef",t.displayedColumns),a.Db(1),a.pc("matRowDefColumns",t.displayedColumns),a.Db(1),a.pc("length",t.resultsLength)("pageSizeOptions",a.qc(7,pe)))},directives:[C.a,O.a,$.a,$.c,$.e,$.f,$.d,p.a,h.c,h.f,m.b,l.b,l.q,l.l,l.e,n.n,G.j,U.a,G.c,G.e,G.b,G.g,G.i,M.a,H.b,G.d,U.b,G.a,G.f,G.h],pipes:[n.e],styles:["img[_ngcontent-%COMP%]{height:60px;width:60px;padding:3px}"]}),de)}],me=((be=function e(){_classCallCheck(this,e)}).\u0275mod=a.Ob({type:be}),be.\u0275inj=a.Nb({factory:function(e){return new(e||be)},imports:[[o.h.forChild(he)],o.h]}),be),ve=i("2thQ"),ge=i("lOAm"),ye=i("Fr4G"),ke=i("67nL"),Ve=((fe=function e(){_classCallCheck(this,e)}).\u0275mod=a.Ob({type:fe}),fe.\u0275inj=a.Nb({factory:function(e){return new(e||fe)},imports:[[n.c,me,v.c,ve.a,l.h,l.p,ge.a,ye.a,ke.a]]}),fe)}}]);